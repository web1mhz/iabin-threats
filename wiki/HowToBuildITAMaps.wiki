#summary How to generate data inputs
#labels 
#sidebar TableOfContents

[http://code.google.com/p/iabin-threats/wiki/HowToBuildITAMaps?wl=en http://iabin-threats.googlecode.com/svn/wiki/resources/gb.gif]
[http://code.google.com/p/iabin-threats/wiki/HowToBuildITAMaps?wl=es http://iabin-threats.googlecode.com/svn/wiki/resources/es.gif]

<wiki:toc />

== Introduction ==

This document is intended to people who has relation with the technical implementation of the project.

The purpose of this document is to illustrate how to build the project from the source code of this repository.

== Technical Requirements ==

 * Apache Subversion SVN Client. [http://subversion.apache.org/packages.html Get it].
 * Apache Maven. [http://maven.apache.org/download.html Get it]
 * Java JRE version 6 or higher. [http://www.java.com/ Get it]
 
== 1. Checking out the source code ==
 
Check out the [http://code.google.com/p/iabin-threats/source/browse/#svn/trunk/ita-maps ita-maps project] of this repository.

 {{{svn checkout https://iabin-threats.googlecode.com/svn/trunk/ita-maps ita-maps}}}
 
Once the project has been checked out, you can update your local copy via the command: 
 {{{svn update}}}
 
The instructions for checking out from Google Code's SVN can be found [http://code.google.com/p/iabin-threats/source/checkout here]
 
== 2. Organizing code for Eclipse IDE ==
 
Once the source code has been checked out, if you want to organize it as an Eclipse IDE project, run the command:
 
 {{{mvn eclipse:eclipse}}}
 
== 3. Compiling project ==
 
If you want to compile the project to get the binaries, run the command:
 
 {{{mvn compile}}}
 
It creates the /target/classes directory where you can find the compiled classes
 
== 4. Packaging project ==
 
If you want to deploy the .jar file of the project, run the command:
 
 {{{mvn package}}}
 
Then you can find the .jar in the /target directory, called _ita_ with the current version of the project _e.g. ita-maps-0.1-SNAPSHOT.jar_

The compiling step is not necessary since the packaging one includes the compiling process to create the jar.

== 5. Configuración del archivo properties ==

The properties file contains the paths of origin and destination of the files to use the web tool _ita-wt_
below is an example of how to configure this file.

{{{
########################
# menu language / / Language to be used in the main menu generation tool data inputs.
########################
language=english

#######################
# PATH 	// path.source source path where the files to be converted to png or kml.
# 		// path.target target path where you store files generated by the tool.
# 		// These folders should be created prior to running the application.
# 		// The folder contains files BIOCLIM the bioclimatic variables.
# 		// The folder contains files Threats variables threats.
# 		// The species folder contains files with information on all species
# 		// The folder containing the file summaries of protected areas and species richness.
#######################
path.source=c:/data/
path.target=c:/iabinmaps/
bioclim.path=bioclim/
threats.path=threats/
species.path=species/
summaries.path=summaries/
summaries.kmloutputpath=protectedArea/

#######################
# FACTORS 	//has two values ​​when it is 0.1 divided by 10 raster values ​​and when 1 does not make any changes.
#######################
bioclim.factor=0.1
threats.factor=0.1
species.factor=1
summaries.factor=1

#######################
# RASTERS // Contains all file names. asc that will be converted to PNG images, among them are:
# 		// Variables bioclimatic p1 to p19.
# 		// Variables to threats7 threats0 threats.
# 		// Species richness of reptiles, plants, insects, birds, Amphibians, mammals, all;
# 		// Protected Areas paQ1; paQ2; paQ3; paQ4.
#######################
rasters=p1;p2;p3;p4;p5;p6;p7;p8;p9;p10;p11;p12;p13;p14;p15;p16;p17;p18;p19;threats0;threats1;threats2;threats3;threats4;threats5;threats6;threats7;reptiles;plants;insects;birds;amphibians;mammals;all;paQ1;paQ2;paQ3;paQ4

reptiles.group=summaries
reptiles.filename=reptiles.asc
plants.group=summaries
plants.filename=plants.asc
insects.group=summaries
insects.filename=insects.asc
birds.group=summaries
birds.filename=birds.asc
amphibians.group=summaries
amphibians.filename=amphibians.asc
all.group=summaries
all.filename=all.asc
mammals.group=summaries
mammals.filename=mammals.asc
threats0.group=threats
threats0.filename=threats0.asc
threats1.group=threats
threats1.filename=threats1.asc
threats2.group=threats
threats2.filename=threats2.asc
threats3.group=threats
threats3.filename=threats3.asc
threats4.group=threats
threats4.filename=threats4.asc
threats5.group=threats
threats5.filename=threats5.asc
threats6.group=threats
threats6.filename=threats6.asc
threats7.group=threats
threats7.filename=threats7.asc
p1.group=bioclim
p1.filename=p1.asc
p2.group=bioclim
p2.filename=p2.asc
p3.group=bioclim
p3.filename=p3.asc
p4.group=bioclim
p4.filename=p4.asc
p5.group=bioclim
p5.filename=p5.asc
p6.group=bioclim
p6.filename=p6.asc
p7.group=bioclim
p7.filename=p7.asc
p8.group=bioclim
p8.filename=p8.asc
p9.group=bioclim
p9.filename=p9.asc
p10.group=bioclim
p10.filename=p10.asc
p11.group=bioclim
p11.filename=p11.asc
p12.group=bioclim
p12.filename=p12.asc
p13.group=bioclim
p13.filename=p13.asc
p14.group=bioclim
p14.filename=p14.asc
p15.group=bioclim
p15.filename=p15.asc
p16.group=bioclim
p16.filename=p16.asc
p17.group=bioclim
p17.filename=p17.asc
p18.group=bioclim
p18.filename=p18.asc
p19.group=bioclim
p19.filename=p19.asc
paQ1.group=summaries
paQ1.filename=paQ1.asc
paQ2.group=summaries
paQ2.filename=paQ2.asc
paQ3.group=summaries
paQ3.filename=paQ3.asc
paQ4.group=summaries
paQ4.filename=paQ4.asc

#######################
# SPECIES 	// Here you specify true or false whether to cross the species folder containing all species modeling results,
# 			// png images for the distribution of species
#######################
speciesDistribution=true
speciesDistribution.group=species

#######################
# SHAPEFILES 	// Here we specify the files. shp of protected areas which we obtain as a result kml files that contain information of protected areas
#######################
shapes= paQ1;paQ2;paQ3;paQ4
paQ1.group=summaries
paQ1.shapefile=paQ1.shp
paQ2.group=summaries
paQ2.shapefile=paQ2.shp
paQ3.group=summaries
paQ3.shapefile=paQ3.shp
paQ4.group=summaries
paQ4.shapefile=paQ4.shp

#######################
# PROTECTED AREA / / contains columns and column names of the files .shp protected areas to display the information bubble kml file of protected areas.
#######################
paQ1.server.url=http://gisweb.ciat.cgiar.org/iabin-threats/ita/summaries/pa
paQ1.shape.column.indexes=3;5;6;21
paQ1.shape.column.names=NAME;COUNTRY;STATE;UNCAT
paQ1.kml.main=mainKML.kml

paQ2.server.url=http://gisweb.ciat.cgiar.org/iabin-threats/ita/summaries/pa
paQ2.shape.column.indexes=3;5;6;21
paQ2.shape.column.names=NAME;COUNTRY;STATE;UNCAT
paQ2.kml.main=mainKML.kml

paQ3.server.url=http://gisweb.ciat.cgiar.org/iabin-threats/ita/summaries/pa
paQ3.shape.column.indexes=3;5;6;21
paQ3.shape.column.names=NAME;COUNTRY;STATE;UNCAT
paQ3.kml.main=mainKML.kml

paQ4.server.url=http://gisweb.ciat.cgiar.org/iabin-threats/ita/summaries/pa
paQ4.shape.column.indexes=3;5;6;21
paQ4.shape.column.names=NAME;COUNTRY;STATE;UNCAT
paQ4.kml.main=mainKML.kml

#######################
# ZOOM 	// Here you specify the minimum and maximum zoom zoom to be used in the creation of png files.
#######################
zoom.min=0
zoom.max=7

#######################
# STYLE KML / / Here you specify the path of the styles that will be applied to the kml file (points or polygons).
#######################

style.url=http://gisweb.ciat.cgiar.org/iabin-threats/ita/resources/styles/style.kml#styleblue
style1.url=http://gisweb.ciat.cgiar.org/iabin-threats/ita/resources/styles/style.kml#stylegreen

#######################
# COLORS // Here you can specify values such as:
# 		 //  color.type establishing a name for the type depending on the files that are going to handle.
# 	     //  .value.max and. value.min these attributes are used if you want the image scale has defined a set range.
# 	     //	.scale here defines the type of scale to be used may be continuous, discrete or discreet set of quantile
# 		 // Examples:
# 		 // for continuous values can be:
# 		 // threats0.color.type = threatscolor
#
# 		 // threatscolor.value.max=3
# 		 // threatscolor.value.min=0
#
# 		 // threatscolor.color.min=255;255;255
# 		 // threatscolor.color.max=255;0;0
# 		 // threatscolor.scale = continuous
#
# 		 // If no attributes are used value.min value.max and the tool uses the values contained in the file. asc
#
# 		 // for continuous values can be:
# 		 // threats0.color.type=threatscolor
#
# 		 // threatscolor.value.max=3
# 		 // threatscolor.value.min=0
#
# 		 // threatscolor.color.min=255;255;255
# 		 // threatscolor.color.max=255;0;0
# 		 // threatscolor.scale=continuous
#
# 		 // for quantile discrete values can be:
# 		 // reptiles.color.type=richness
#
# 		 // richness.color.min=255;223;10
# 		 // richness.color.max=255;0;0
# 		 // richness.scale=quantiles
# 		 // richness.scale.quantiles=5
#
# 		 // for fixed discrete values can be:
# 		 // reptiles.color.type=richness
#
# 		 // richness.color.min=255;223;10
# 		 // richness.color.max=255;0;0
# 		 // richness.scale=fixed
# 		 // richness.scale.fixed=100
#
#######################

threats0.color.type=threatscolor
threats1.color.type=threatscolor
threats2.color.type=threatscolor
threats3.color.type=threatscolor
threats4.color.type=threatscolor
threats5.color.type=threatscolor
threats6.color.type=threatscolor
threats7.color.type=threatscolor
 
p1.color.type=temperature
p2.color.type=temperature
p3.color.type=temperature
p4.color.type=temperature
p5.color.type=temperature
p6.color.type=temperature
p7.color.type=temperature
p8.color.type=temperature
p9.color.type=temperature
p10.color.type=temperature
p11.color.type=temperature
p12.color.type=precipitation
p13.color.type=precipitation
p14.color.type=precipitation
p15.color.type=precipitation
p16.color.type=precipitation
p17.color.type=precipitation
p18.color.type=precipitation
p19.color.type=precipitation

paQ1.color.type=summaries
paQ2.color.type=summaries
paQ3.color.type=summaries
paQ4.color.type=summaries

reptiles.color.type=richness
amphibians.color.type=richness
birds.color.type=richness
insects.color.type=richness
mammals.color.type=richness
plants.color.type=richness
all.color.type=richness

speciesDistribution.color.type=speciesColor

threatscolor.value.max=3
threatscolor.value.min=0

threatscolor.color.min= 255;255;255
threatscolor.color.max= 255;0;0
threatscolor.scale=continuous


temperature.color.min= 255;255;0
temperature.color.max= 255;0;0
temperature.scale=continuous

precipitation.color.min= 0;0;255
precipitation.color.max= 255;0;255
precipitation.scale=continuous

summaries.color.min= 150;120;180
summaries.color.max= 150;120;180
summaries.scale=continuous

richness.color.min= 255;223;10
richness.color.max= 255;0;0
richness.scale=quantiles
richness.scale.quantiles=5

speciesColor.color.min=255;204;20
speciesColor.color.max=255;8;0
speciesColor.scale=continuous
}}}

when you finish configuring this file is saved with the extension _.properties_
 
== 6. Using the project ==
 
After packaging the project, you can use the services it provides. And after [Configuring] it you can run it with _java_ commands for example:

{{{ java -cp ita-maps-1.0-SNAPSHOT.jar org.ciat.ita.maps.general.General  /mnt/HD724-geodata/iabin.properties }}}

This command contains the main class General and the path of the configuration properties of the tool that described above.
But it has the properties file the tool will create a default which can then be edited and configured.

Once implemented the project will have a menu like this:

{{{
welcome 
 select the option: 
1. create default properties file
2. convert file .shp to kml, protected areas
3. convert file .csv to kml; points and polygons - ocurrences and chull, chull-buff
4. convert file .asc to png, variables bioclimaticas
5. convert file .asc to png, species distribution
6. performs all the previous tasks
for more info visit the project's wiki page at http://code.google.com/p/iabin-threats/wiki/HowToBuildITAMaps
started at : 2011/04/25 13:49:16
please select an option :
}}}

1) Create a properties file if it does not exist.

2) Convert. shp to kml file with points of information on protected areas and keeps them in the path specified in the file properties.

3) Convert. csv to kml files of points and polygons (occurrences, chull and chull-buff) of all species and stored in the path specified in the file properties.

4) Convert the. asc bioclimatic varibles, threats, species richness and protected areas and png images saved in the path specified in the file properties.

5) Convert the. asc of species containing PNG images: distribution of species limited by the convex hull, species distribution and the threshold of species distribution, the files are saved in the path specified in the properties file.
    When you run this option displays the following:

{{{   
welcome 
 select the option: 
1. create default properties file
2. convert file .shp to kml, protected areas
3. convert file .csv to kml; points and polygons - ocurrences and chull, chull-buff
4. convert file .asc to png, variables bioclimaticas
5. convert file .asc to png, species distribution
6. performs all the previous tasks
for more info visit the project's wiki page at http://code.google.com/p/iabin-threats/wiki/HowToBuildITAMaps
started at : 2011/04/25 13:49:16
please select an option :5
you selected option :5
Do you want to run the script for all species? y/n :
y
}}}
   
    _y_ typing tool will search all folders within the folder species and will convert all files found.
   
    _n_ typing the following appears:
    
{{{   
welcome 
 select the option: 
1. create default properties file
2. convert file .shp to kml, protected areas
3. convert file .csv to kml; points and polygons - ocurrences and chull, chull-buff
4. convert file .asc to png, variables bioclimaticas
5. convert file .asc to png, species distribution
6. performs all the previous tasks
for more info visit the project's wiki page at http://code.google.com/p/iabin-threats/wiki/HowToBuildITAMaps
started at : 2011/04/25 13:54:42
please select an option :5
you selected option :5
Do you want to run the script for all species? y/n :
n
Please write the minimum and maximum species directory separated by (-), format: 78465-98750543:
5000000-5000010
}}}
   
    Here you must specify the range that you want to process.
   
6) Run all the above options.

